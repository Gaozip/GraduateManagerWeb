<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://www.mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.whale.dao.ResumeWorkMapper">

  <resultMap id="resumeWorkMapperMap" type="org.whale.pojo.ResumeWork">
    <id column="PK_RESUME_WORK_ID" jdbcType="DECIMAL" property="pkResumeWorkId" />
    <result column="COMPANY_NAME" jdbcType="VARCHAR" property="companyName" />
    <result column="INDUSTRY" jdbcType="VARCHAR" property="industry" />
    <result column="JOB_INTENSION" jdbcType="VARCHAR" property="jobIntension" />
    <result column="JOB_TYPE" jdbcType="VARCHAR" property="jobType" />
    <result column="MONTH_SALARY" jdbcType="DECIMAL" property="monthSalary" />
    <result column="JOB_DESCRIPTION" jdbcType="VARCHAR" property="jobDescription" />
    <result column="WORK_DATE" jdbcType="VARCHAR" property="workDate" />
    <result column="FK_RESUME_ID" jdbcType="DECIMAL" property="fkResumeId" />
  </resultMap>
  
  <insert id="doSave" parameterType="java.util.List">
    insert into SYS_RESUME_WORK (PK_RESUME_WORK_ID, COMPANY_NAME, INDUSTRY, JOB_INTENSION, JOB_TYPE, MONTH_SALARY, JOB_DESCRIPTION, FK_RESUME_ID, WORK_DATE)
    select SEQ_SYS_RESUME_WORK.nextval , t.* from (
	    <foreach collection="list" item="item" index="index" separator="UNION ALL">
	    	select
		    	#{item.companyName,jdbcType=VARCHAR}, 
		    	#{item.industry,jdbcType=VARCHAR}, 
		      	#{item.jobIntension,jdbcType=VARCHAR}, 
		      	#{item.jobType,jdbcType=VARCHAR}, 
		      	#{item.monthSalary,jdbcType=DECIMAL}, 
		      	#{item.jobDescription,jdbcType=VARCHAR}, 
		      	#{item.fkResumeId,jdbcType=DECIMAL}, 
		      	#{item.workDate,jdbcType=VARCHAR}
		     from DUAL
	    </foreach>
    ) t
  </insert>
  
  <select id="getResumeWorkByResumeId" resultMap="resumeWorkMapperMap" parameterType="Long">
  	select * from sys_resume_work where FK_resume_id = #{fkResumeId,jdbcType=DECIMAL}
  </select>
  
  <update id="doUpdateByResumeId" parameterType="java.util.List">
  	 <foreach collection="list" item="item" index="index" separator=";">
  	 	 update SYS_RESUME_WORK
   		 set 
   		 	COMPANY_NAME = #{item.companyName,jdbcType=VARCHAR},
      		INDUSTRY = #{item.industry,jdbcType=VARCHAR},
      		JOB_INTENSION = #{item.jobIntension,jdbcType=VARCHAR},
      		JOB_TYPE = #{item.jobType,jdbcType=VARCHAR},
      		MONTH_SALARY = #{item.monthSalary,jdbcType=DECIMAL},
      		JOB_DESCRIPTION = #{item.jobDescription,jdbcType=VARCHAR},
      		WORK_DATE = #{item.workDate,jdbcType=VARCHAR}
    	 where 
    	 	FK_RESUME_ID = #{item.fkResumeId,jdbcType=DECIMAL}
  	 </foreach>
  </update>
  
  <delete id="doDeleteByResumeId" parameterType="java.lang.Long">
  	 delete from SYS_RESUME_WORK where FK_RESUME_ID = #{fkResumeId,jdbcType=DECIMAL}
  </delete>
</mapper>